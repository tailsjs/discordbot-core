# Использование базы данных.
Работа с базой данных очень простая. Нужно всего лишь понимание JSON, массивов и объектов.

## Начнём?
Для использования базы данных в командах, необходимо в шаблон функции (в часть с {}) ввести слово "db"

```js
function: async function(message, { db }){...},
```
Через неё, нам станет доступна расширенная база данных. (сохранения, т.п)

## Как использовать?
Использование базы данных нереально простое.<br>
Я вам продемонстрирую пример команды "ник"

```js
module.exports = {
    tag: ["ник"],
    function: async function(message, { db }){
        const nick = message.text.split(" ").slice(1).join(" ");
        if (!nick) return message.warn('Вы забыли ввести новый никнейм!');

        message.user.nick = nick;
        db.write();

        return message.ok('Вы успешно сменили никнейм!');
    },
    rights: 0,
    help: "ник [новый никнейм]",
    description: "установка никнейма." 
}
```

## Разберём код?
```js
function: async function(message, { db }){...},
```
Тут ваш код, ничего удивительного. (Или мой, в этом случае)<br>
Про разработку своих команд можно прочитать тута: https://github.com/tailsjs/discordbot-core/blob/main/docs/creatingCommands.md
```js
const nick = message.text.split(" ").slice(1).join(" ");
```
Здесь идёт инициализация переменной "nick", в которою пользователь ввёл свой никнейм.
```js
if (!nick) return message.warn('Вы забыли ввести новый никнейм!');
```
Проверка, если человек не ввёл аргумент.
```js
message.user.nick = nick;
db.write();
```
Установка ника, после чего запись в бд.
```js
return message.ok('Вы успешно сменили никнейм!');
```
Сообщение о успешной смене никнейма.

# Немного полезной информации.
Для того, чтобы использовать базу данных на более высоком уровне, необходимо знать, как использовать саму бд.
Сейчас продемонстрирую, как делать запросы.
```js
db.get('users')
```
Получение всех пользователей из базы данных без возможности посмотреть.
```js
db.get('users').find({ id: ID }).value();
```
Получение информации об определённом человеке. Где стоит "ID" туда необходимо вводить ID человека.
#
Для того, чтобы создать переменную с пользователями можно использовать:
```js
const users = db.get("users").value();
```
Затем, вы можете использовать эту переменную для любых ваших затей.
```js
message.send(users[0].nick);
```
#
```js
db.getUser(id);
```
Получение конкретного пользователя из бд. Взял у fakeman-cat с vkbot-core. Необходимо использовать функцию с ```await```.

```js
const user = await db.getUser(358212650326425601)
message.ok(user.nick) // тейлс
```
